{"version":3,"sources":["components/city-default/svg/update.svg","components/city-list-item/svg/delete.svg","components/spinner/index.js","components/spinner/spinner.js","actions/index.js","components/city-default/city-default.js","components/city-default/index.js","components/city-list-item/index.js","components/city-list-item/city-list-item.js","components/input-box/input-box.js","components/input-box/index.js","components/city-list/index.js","components/city-list/city-list.js","components/pages/main-page.js","utils/getWeather.js","utils/weatherDataProcessing.js","components/app/App.js","utils/getGeoPosition.js","reducers/initial-state.js","reducers/index.js","store.js","index.js"],"names":["module","exports","Spinner","className","locRequested","type","isGeoPosAvailable","mapDispatchToProps","updateLoadingStatus","loading","CityDefault","connect","city","cityByCoords","useEffect","JSON","stringify","id","src","updIcon","alt","onClick","main","icon","temp","pressure","wind","humidity","lat","lon","CityListItem","cityDelete","index","i","useState","setLoading","error","deleteIcon","updateInputField","text","InputBox","inputValue","setInputValue","onChange","event","target","value","preventDefault","CityList","frontCity","cities","map","el","key","MainPage","apiUrl","getWeatherByCityName","cityName","APIkey","axios","get","params","q","appid","dataDestructuring","weather","name","speed","coord","toFixed","substr","cityLoaded","cityRequest","locError","locLoaded","cityByCoordsLoaded","state","props","apiKey","cityDefault","inputField","successGeoLocCallback","pos","coords","latitude","longitude","getWeatherByCoord","then","res","data","errorGeoLocCallback","catch","err","message","successCallback","errorCallback","navigator","geolocation","getCurrentPosition","localStorage","setItem","localState","parse","getItem","initialState","reducer","action","splice","unshift","store","createStore","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ad030b2d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/update.084487e1.svg\";","module.exports = __webpack_public_path__ + \"static/media/delete.619e5992.svg\";","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport './spinner.scss';\r\n\r\nconst Spinner = () =>\r\n  <div className=\"lds-css ng-scope\">\r\n    <div className=\"lds-eclipse\">\r\n      <div/>\r\n    </div>\r\n  </div>;\r\n\r\nexport default Spinner;","const updateInputField = (text) => ({\r\n  type: 'UPDATE_INPUT_FIELD',\r\n  text\r\n});\r\n\r\nconst updateLoadingStatus = (loading) => ({\r\n  type: 'UPDATE_LOADING_STATUS',\r\n  loading\r\n});\r\n\r\nconst cityDelete = (index) => ({\r\n  type: 'DELETE_CITY',\r\n  index\r\n});\r\n\r\nconst cityRequest = () => ({\r\n  type: 'FETCH_CITY_REQUEST'\r\n});\r\n\r\nconst cityLoaded = (city) => ({\r\n  type: 'FETCH_CITY_SUCCESS',\r\n  city\r\n});\r\n\r\nconst locRequested = () => ({\r\n  type: 'FETCH_GEOLOCATION_REQUEST',\r\n  isGeoPosAvailable: null\r\n});\r\n\r\nconst locLoaded = () => ({\r\n  type: 'FETCH_GEOLOCATION_SUCCESS',\r\n  isGeoPosAvailable: true\r\n});\r\n\r\nconst locError = () => ({\r\n  type: 'FETCH_GEOLOCATION_FAILURE',\r\n  isGeoPosAvailable: false\r\n});\r\n\r\nconst cityByCoordsLoaded = (city) => ({\r\n  type: 'FETCH_CITY_BY_COORDS_SUCCESS',\r\n  city\r\n});\r\n\r\nexport {\r\n  cityRequest,\r\n  cityLoaded,\r\n  locError,\r\n  locLoaded,\r\n  locRequested,\r\n  updateInputField,\r\n  cityDelete,\r\n  updateLoadingStatus,\r\n  cityByCoordsLoaded\r\n};","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './city-default.scss';\r\nimport updIcon from './svg/update.svg';\r\nimport Spinner from '../spinner';\r\nimport { locRequested, updateLoadingStatus } from \"../../actions\";\r\n\r\nconst CityDefault = ({ city, loading, updateLoadingStatus, locRequested }) => {\r\n\r\n  const updCityInfo = () => {\r\n    locRequested();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if(city && JSON.stringify(city) !== '{}'){\r\n      updateLoadingStatus(false);}\r\n  }, [city, updateLoadingStatus]);\r\n\r\n  return (\r\n    <div id=\"city-default\">\r\n      {loading\r\n        ? <Spinner />\r\n        : <div>\r\n          <div id=\"icons-bar\">\r\n            <img id=\"navIcon\" src={updIcon} alt=\"\" onClick={updCityInfo}/>\r\n          </div>\r\n          <div id=\"city-info\">\r\n            <div id=\"city-info-name\">{city.city}</div>\r\n            <div id=\"city-info-weather\">{city.main}</div>\r\n          </div>\r\n          <div id=\"cd-weather-icon\">\r\n            <img src={`/icons/${city.icon}.svg`} alt=\"\"/>\r\n          </div>\r\n          <div id=\"cd-temp\">{`${city.temp}°`}</div>\r\n          <div id=\"сd-weather-values\">\r\n            <div>Pressure: <span id=\"cd-pressure\">{city.pressure} pHa</span></div>\r\n            <div>Wind: <span id=\"cd-wind\">{city.wind} m/s</span></div>\r\n            <div>Humidity: <span id=\"cd-himidity\">{city.humidity}%</span></div>\r\n            <div>Coord: <span id=\"cd-coord\">{`[${city.lat}: ${city.lon}]`}</span></div>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n};\r\n\r\nconst mapStateToProps = ({ loading, cityByCoords }) => ({\r\n  city: cityByCoords,\r\n  loading\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  updateLoadingStatus,\r\n  locRequested\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CityDefault);","import CityDefault from './city-default';\r\n\r\nexport default CityDefault;","import CityListItem from './city-list-item';\r\n\r\nexport default CityListItem;","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './city-list-item.scss';\r\nimport deleteIcon from './svg/delete.svg';\r\nimport { cityDelete } from \"../../actions\";\r\nimport Spinner from '../spinner';\r\n\r\nconst CityListItem = ({ city, i, cityDelete }) => {\r\n  const [ loading, setLoading ] = useState(true);\r\n  const deleteCity = () => cityDelete(i);\r\n\r\n  useEffect(() => {\r\n    if(city && JSON.stringify(city) !== '{}'){\r\n      setLoading(false);}\r\n    else\r\n      setLoading(true);\r\n  }, [city]);\r\n\r\n  return (\r\n    <div className=\"city-list-item\">\r\n      {loading\r\n        ? <Spinner/>\r\n        : <div className=\"city-list-item\">\r\n          <div id=\"tab-info\">\r\n            <div id=\"tab-info-city\">\r\n              <div id=\"tab-info-city-text\">\r\n                {!city.error ? `${city.city} ${city.temp}°`: ''}\r\n              </div>\r\n            </div>\r\n            <div id=\"tab-info-icon\">\r\n              <div id=\"tab-info-icon-svg\">\r\n                {!city.error ? <img src={`/icons/${city.icon}.svg`} alt=\"\"/> : ''}\r\n              </div>\r\n            </div>\r\n            <div id=\"tab-info-delete\">\r\n              <div id=\"tab-info-delete-svg\">\r\n                <img src={deleteIcon} alt=\"\" onClick={deleteCity}/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {city.error\r\n            ? <div className=\"error-message\">{city.error}</div>\r\n            :<div id=\"item-info\">\r\n              <div id=\"item-info-left\">\r\n                <div className=\"weather-info-line\">Pressure:</div>\r\n                <div className=\"weather-info-line\">Wind:</div>\r\n                <div className=\"weather-info-line\">Humidity:</div>\r\n                <div className=\"weather-info-line\">Coord.:</div>\r\n              </div>\r\n              <div id=\"item-info-right\">\r\n                <div className=\"weather-info-line\">{city.pressure} hPa</div>\r\n                <div className=\"weather-info-line\">{city.wind} m/s</div>\r\n                <div className=\"weather-info-line\">{city.humidity}%</div>\r\n                <div className=\"weather-info-line\">[{city.lat}, {city.lon}]</div>\r\n              </div>\r\n            </div>\r\n          }\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default connect(null, { cityDelete })(CityListItem);","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './input-box.scss';\r\nimport { updateInputField } from \"../../actions\";\r\n\r\nconst InputBox = ({ updateInputField }) => {\r\n  const [ inputValue, setInputValue ] = useState('');\r\n\r\n  const handleChange = (event) =>\r\n    setInputValue(event.target.value);\r\n\r\n  const clickButton = (event) =>{\r\n    event.preventDefault();\r\n    setInputValue('');\r\n    updateInputField(inputValue);\r\n  };\r\n\r\n  return (\r\n    <div id=\"input-box-main\">\r\n      <div id=\"input-box\">\r\n        <form id=\"input-form\">\r\n          <input\r\n            id=\"input-field\"\r\n            onChange={handleChange}\r\n            value={ inputValue }\r\n          />\r\n          <button\r\n            id=\"search-button\"\r\n            onClick={clickButton}\r\n          >\r\n            Search\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  updateInputField\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(InputBox);","import InputBox from \"./input-box\";\r\n\r\nexport default InputBox;","import CityList from './city-list';\r\n\r\nexport default CityList;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './city-list.scss';\r\nimport CityListItem from '../city-list-item';\r\nimport InputBox from '../input-box';\r\n\r\nconst CityList = ({ cities }) => {\r\n  return (\r\n    <div id=\"city-list\">\r\n      <InputBox />\r\n      <div className={\"city-list\"}>\r\n        {cities.map((el, i) => (<CityListItem city={el} key={i} i={i}/>))}\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nconst mapStateToProps = ({ frontCity, cities }) => ({\r\n  cities,\r\n  frontCity\r\n});\r\n\r\nexport default connect(mapStateToProps)(CityList);","import React from 'react';\r\nimport CityDefault from '../city-default';\r\nimport CityList from '../city-list';\r\nimport './main-page.scss';\r\n\r\nconst MainPage = () =>\r\n  <div id={'main-page'}>\r\n    <CityDefault />\r\n    <CityList />\r\n  </div>;\r\n\r\nexport default MainPage;","import axios from 'axios';\r\n\r\nconst apiUrl = 'https://api.openweathermap.org/data/2.5/weather?';\r\n\r\nconst getWeatherByCoord = (lat, lon, APIkey) =>\r\n  axios.get(apiUrl, {\r\n    params: {\r\n      appid: APIkey,\r\n      lat: lat,\r\n      lon: lon\r\n    }\r\n  });\r\n\r\nconst getWeatherByCityName = (cityName, APIkey) =>\r\n  axios.get(apiUrl, {\r\n    params: {\r\n      q: cityName,\r\n      appid: APIkey\r\n    }\r\n  });\r\n\r\n\r\nexport {\r\n  getWeatherByCoord,\r\n  getWeatherByCityName\r\n};","export const dataDestructuring = weather => {\r\n  let {\r\n    name,\r\n    main: { temp, humidity, pressure },\r\n    weather: { 0: { main, icon } },\r\n    wind: { speed },\r\n    coord\r\n  } = weather;\r\n\r\n  temp = (temp - 273.15).toFixed(0);\r\n  icon = icon.substr(0, 2);\r\n\r\n  return {\r\n    city: name,\r\n    temp,\r\n    icon,\r\n    main,\r\n    pressure,\r\n    humidity,\r\n    wind: speed,\r\n    lon: coord.lon,\r\n    lat: coord.lat\r\n  }\r\n};","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport './app.scss';\nimport { MainPage } from '../pages';\nimport { cityByCoordsLoaded, cityLoaded, cityRequest, locError, locLoaded, locRequested } from '../../actions';\nimport { getWeatherByCityName, getWeatherByCoord } from \"../../utils/getWeather\";\nimport { dataDestructuring } from \"../../utils/weatherDataProcessing\";\nimport { getGeoPosition } from \"../../utils/getGeoPosition\";\n\nconst App = (props) => {\n  const { cityLoaded, cityRequest, locLoaded, locError, cityByCoordsLoaded, state} = props;\n  const { apiKey, cityDefault, isGeoPosAvailable, inputField } = state;\n\n  const successGeoLocCallback = (pos) => {\n    const lat = pos.coords.latitude;\n    const lon = pos.coords.longitude;\n    locLoaded();\n    getWeatherByCoord(lat, lon, apiKey)\n      .then((res) => {\n        cityByCoordsLoaded(dataDestructuring(res.data));\n      });\n  };\n\n  const errorGeoLocCallback = () => {\n    locError();\n    getWeatherByCityName(cityDefault, apiKey)\n      .then((res) => {\n        cityByCoordsLoaded(dataDestructuring(res.data));\n      });\n  };\n\n  useEffect(() => {\n    if(inputField){\n      cityRequest();\n      getWeatherByCityName(inputField, apiKey)\n        .then((res) => {\n          cityLoaded(dataDestructuring(res.data));\n        })\n        .catch((err) => {\n          cityLoaded({error: err.message});\n        });\n    }\n  }, [inputField, apiKey, cityLoaded, cityRequest]);\n\n  useEffect(() => {\n    if(isGeoPosAvailable === null)\n      getGeoPosition(successGeoLocCallback, errorGeoLocCallback);\n  });\n\n  useEffect(() => {\n    localStorage.setItem('state', JSON.stringify({...state, inputField: null}));\n  }, [state]);\n\n  return (\n    <div id={'app'}>\n      <MainPage />\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({state});\n\nconst mapDispatchToProps = {\n  cityLoaded,\n  cityRequest,\n  locError,\n  locLoaded,\n  locRequested,\n  cityByCoordsLoaded\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","const getGeoPosition = (successCallback, errorCallback) => {\r\n  navigator.geolocation.getCurrentPosition(successCallback, errorCallback);\r\n};\r\n\r\nexport { getGeoPosition };","const localState = () => JSON.parse(localStorage.getItem('state'));\r\n\r\nconst initialState =\r\n  localState()\r\n    ? localState()\r\n    : {\r\n      apiKey: '3dd82107b17241c740a2a087d34da02d',\r\n      inputField: null,\r\n      cities: [],\r\n      loading: true,\r\n      isGeoPosAvailable: null,\r\n      cityDefault: 'Moscow',\r\n      cityByCoords: {}\r\n    };\r\n\r\nexport default initialState;","import initialState from \"./initial-state\";\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch(action.type){\r\n    case 'UPDATE_INPUT_FIELD':\r\n      return {\r\n        ...state,\r\n        inputField: action.text\r\n      };\r\n    case 'UPDATE_LOADING_STATUS':\r\n      return {\r\n        ...state,\r\n        loading: action.loading\r\n      };\r\n    case 'DELETE_CITY':{\r\n      const cities = [...state.cities];\r\n      cities.splice(action.index, 1);\r\n      return {\r\n        ...state,\r\n        cities,\r\n        inputField: null\r\n      };\r\n    }\r\n    case 'FETCH_CITY_REQUEST':{\r\n      const cities = [...state.cities];\r\n      cities.unshift({});\r\n      return {\r\n        ...state,\r\n        cities\r\n      };\r\n    }\r\n    case 'FETCH_CITY_SUCCESS':{\r\n      const cities = [...state.cities];\r\n      cities[0] = action.city;\r\n      return {\r\n        ...state,\r\n        cities\r\n      };\r\n    }\r\n    case 'FETCH_GEOLOCATION_REQUEST':\r\n      return {\r\n        ...state,\r\n        isGeoPosAvailable: action.isGeoPosAvailable,\r\n        loading: true\r\n      };\r\n    case 'FETCH_GEOLOCATION_SUCCESS':\r\n      return {\r\n        ...state,\r\n        isGeoPosAvailable: action.isGeoPosAvailable\r\n      };\r\n    case 'FETCH_GEOLOCATION_FAILURE':\r\n      return {\r\n        ...state,\r\n        isGeoPosAvailable: action.isGeoPosAvailable\r\n      };\r\n    case 'FETCH_CITY_BY_COORDS_SUCCESS':{\r\n      return {\r\n        ...state,\r\n        cityByCoords: action.city\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;","import { createStore } from 'redux';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './components/app/App';\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>, \n  document.getElementById('root')\n);\n"],"sourceRoot":""}