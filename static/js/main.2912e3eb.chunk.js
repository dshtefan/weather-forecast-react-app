(this["webpackJsonpweather-search-2"]=this["webpackJsonpweather-search-2"]||[]).push([[0],{24:function(e,t,n){e.exports=n.p+"static/media/update.084487e1.svg"},25:function(e,t,n){e.exports=n.p+"static/media/err.99f8e8a9.svg"},26:function(e,t,n){e.exports=n.p+"static/media/delete.619e5992.svg"},27:function(e,t,n){e.exports=n(62)},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(6),c=n.n(a),o=n(2),s=(n(37),n(38),n(24)),l=n.n(s),u=n(25),d=n.n(u),E=(n(39),function(){return r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-eclipse"},r.a.createElement("div",null)))}),f=function(){return{type:"FETCH_GEOLOCATION_REQUEST",isGeoPosAvailable:null}},m=(n(40),function(e){var t=e.pressure,n=e.wind,i=e.humidity,a=e.lat,c=e.lon;return r.a.createElement("div",{id:"item-info"},r.a.createElement("div",{id:"item-info-left"},r.a.createElement("div",{className:"weather-info-line"},"Pressure:"),r.a.createElement("div",{className:"weather-info-line"},"Wind:"),r.a.createElement("div",{className:"weather-info-line"},"Humidity:"),r.a.createElement("div",{className:"weather-info-line"},"Coord.:")),r.a.createElement("div",{id:"item-info-right"},r.a.createElement("div",{className:"weather-info-line"},t," hPa"),r.a.createElement("div",{className:"weather-info-line"},n," m/s"),r.a.createElement("div",{className:"weather-info-line"},i,"%"),r.a.createElement("div",{className:"weather-info-line"},"[",a,", ",c,"]")))}),y=Object(o.b)((function(e){var t=e.loading;return{city:e.cityByCoords,loading:t,errorMessage:e.errorMessage}}),{locRequested:f})((function(e){var t=e.city,n=e.loading,i=e.locRequested,a=e.errorMessage;return r.a.createElement("div",{id:"city-default"},n?r.a.createElement(E,null):r.a.createElement("div",null,r.a.createElement("div",{id:"icons-bar"},r.a.createElement("img",{id:"navIcon",src:l.a,alt:"",onClick:function(){return i()}}),null!==a?r.a.createElement("img",{id:"errIcon",src:d.a,alt:""}):null,null!==a?r.a.createElement("div",{className:"error"},a):null),t.error?r.a.createElement("div",null,t.error):r.a.createElement("div",null,r.a.createElement("div",{id:"city-info"},r.a.createElement("div",{id:"city-info-name"},t.city),r.a.createElement("div",{id:"city-info-weather"},t.main)),r.a.createElement("div",{id:"cd-weather-icon"},r.a.createElement("img",{src:"https://dshtefan.github.io/weather-search-2/icons/".concat(t.icon,".svg"),alt:""})),r.a.createElement("div",{id:"cd-temp"},"".concat(t.temp,"\xb0")),r.a.createElement("div",{id:"\u0441d-weather-values"},r.a.createElement(m,{pressure:t.pressure,humidity:t.humidity,wind:t.wind,lat:t.lat,lon:t.lon})))))})),p=(n(41),n(9)),v=(n(42),n(26)),O=n.n(v),g=Object(o.b)(null,{cityDelete:function(e){return{type:"DELETE_CITY",index:e}}})((function(e){var t=e.city,n=e.i,a=e.cityDelete,c=Object(i.useState)(!0),o=Object(p.a)(c,2),s=o[0],l=o[1];return Object(i.useEffect)((function(){t&&"{}"!==JSON.stringify(t)?l(!1):l(!0)}),[t]),r.a.createElement("div",{className:"city-list-item"},s?r.a.createElement(E,null):r.a.createElement("div",{className:"city-list-item"},r.a.createElement("div",{id:"tab-info"},r.a.createElement("div",{id:"tab-info-city"},r.a.createElement("div",{id:"tab-info-city-text"},t.error?"":"".concat(t.city," ").concat(t.temp,"\xb0"))),r.a.createElement("div",{id:"tab-info-icon"},r.a.createElement("div",{id:"tab-info-icon-svg"},t.error?"":r.a.createElement("img",{src:"https://dshtefan.github.io/weather-search-2/icons/".concat(t.icon,".svg"),alt:""}))),r.a.createElement("div",{id:"tab-info-delete"},r.a.createElement("div",{id:"tab-info-delete-svg"},r.a.createElement("img",{src:O.a,alt:"",onClick:function(){return a(n)}})))),t.error?r.a.createElement("div",{className:"error-message"},t.error):r.a.createElement(m,{pressure:t.pressure,humidity:t.humidity,wind:t.wind,lat:t.lat,lon:t.lon})))})),b=(n(43),Object(o.b)(null,{addCityToQueue:function(e){return{type:"ADD_CITY_TO_QUEUE",city:e}}})((function(e){var t=e.addCityToQueue,n=Object(i.useState)(""),a=Object(p.a)(n,2),c=a[0],o=a[1];return r.a.createElement("div",{id:"input-box-main"},r.a.createElement("div",{id:"input-box"},r.a.createElement("form",{id:"input-form"},r.a.createElement("input",{id:"input-field",onChange:function(e){return o(e.target.value)},value:c}),r.a.createElement("button",{id:"search-button",onClick:function(e){e.preventDefault(),o(""),t(c)}},"Search"))))}))),h=Object(o.b)((function(e){var t=e.frontCity;return{cities:e.cities,frontCity:t}}))((function(e){var t=e.cities;return r.a.createElement("div",{id:"city-list"},r.a.createElement(b,null),r.a.createElement("div",{className:"city-list"},t.map((function(e,t){return r.a.createElement(g,{city:e,key:t,i:t})}))))})),C=(n(44),function(){return r.a.createElement("div",{id:"main-page"},r.a.createElement(y,null),r.a.createElement(h,null))}),_=n(13),S=n.n(_),T="https://api.openweathermap.org/data/2.5/weather?",j=function(e,t){return S.a.get(T,{params:{q:e,appid:t}})},w=function(e){var t=e.name,n=e.main,i=n.temp,r=n.humidity,a=n.pressure,c=e.weather[0],o=c.main,s=c.icon,l=e.wind.speed,u=e.coord;return{city:t,temp:i=(i-273.15).toFixed(0),icon:s=s.substr(0,2),main:o,pressure:a,humidity:r,wind:l,lon:u.lon,lat:u.lat}},R=function(e,t){navigator.geolocation.getCurrentPosition(e,t)},A=function(e){var t=e.cities.map((function(e){return{city:e.city}}));localStorage.setItem("state",JSON.stringify({cities:t}))},D={cityLoaded:function(e){return{type:"FETCH_CITY_SUCCESS",city:e}},cityRequest:function(){return{type:"FETCH_CITY_REQUEST"}},locError:function(){return{type:"FETCH_GEOLOCATION_FAILURE",isGeoPosAvailable:!1}},locLoaded:function(){return{type:"FETCH_GEOLOCATION_SUCCESS",isGeoPosAvailable:!0}},locRequested:f,cityByCoordsLoaded:function(e){return{type:"FETCH_CITY_BY_COORDS_SUCCESS",city:e}},updateLoadingStatus:function(e){return{type:"UPDATE_LOADING_STATUS",loading:e}},cityError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"FETCH_CITY_ERROR",city:e}},deleteCityFromQueue:function(){return{type:"DELETE_CITY_FROM_QUEUE"}},addErrorMessage:function(e){return{type:"ADD_ERROR_MESSAGE",message:e}},clearErrorMessage:function(){return{type:"CLEAR_ERROR_MESSAGE"}}},N=Object(o.b)((function(e){return{state:e}}),D)((function(e){var t=e.deleteCityFromQueue,n=e.addErrorMessage,a=e.clearErrorMessage,c=e.cityError,o=e.cityLoaded,s=e.cityRequest,l=e.locLoaded,u=e.locError,d=e.cityByCoordsLoaded,E=e.updateLoadingStatus,f=e.state,m=f.apiKey,y=f.cityDefault,p=f.isGeoPosAvailable,v=f.cityByCoords,O=f.cities,g=f.citiesQueue,b=function(e){var t=e.coords.latitude,n=e.coords.longitude;l(),function(e,t,n){return S.a.get(T,{params:{appid:n,lat:e,lon:t}})}(t,n,m).then((function(e){d(w(e.data))})).catch((function(e){d({error:e.message})}))},h=function(){u(),j(y,m).then((function(e){d(w(e.data))})).catch((function(e){d({error:e.message})}))};return Object(i.useEffect)((function(){g.length>0&&(O.length<4?(s(),j(g[0],m).then((function(e){o(w(e.data)),a()})).catch((function(e){c(),n(e.message)})),t()):t())}),[g,n,a,O,t,m,o,s,c]),Object(i.useEffect)((function(){null===p&&R(b,h)})),Object(i.useEffect)((function(){v&&"{}"!==JSON.stringify(v)&&E(!1)}),[v,E]),Object(i.useEffect)((function(){A(f)}),[f]),r.a.createElement("div",{id:"app"},r.a.createElement(C,null))})),P=n(7),I=n(8),L=n(5),U={apiKey:"9c2f796d45e91e5c01a2ae26f1613625",citiesQueue:[],cities:[],loading:!0,isGeoPosAvailable:null,cityDefault:"Moscow",cityByCoords:{},errorMessage:null};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var G=function(){var e=JSON.parse(localStorage.getItem("state"));return null===e?null:{citiesQueue:e.cities.map((function(e){return e.city}))}}(),Q=G?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},U,{},G):U;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY_TO_QUEUE":var n=Object(L.a)(e.citiesQueue);return n.push(t.city),Y({},e,{citiesQueue:n});case"DELETE_CITY_FROM_QUEUE":var i=Object(L.a)(e.citiesQueue);return i.shift(),Y({},e,{citiesQueue:i});case"UPDATE_LOADING_STATUS":return Y({},e,{loading:t.loading});case"DELETE_CITY":var r=Object(L.a)(e.cities);return r.splice(t.index,1),Y({},e,{cities:r,inputField:null});case"FETCH_CITY_REQUEST":var a=Object(L.a)(e.cities);return a.push({}),Y({},e,{cities:a});case"FETCH_CITY_ERROR":var c=Object(L.a)(e.cities),o=c.filter((function(e){return JSON.stringify(e)!==JSON.stringify({})})).length;return c.splice(o,1),Y({},e,{cities:c});case"FETCH_CITY_SUCCESS":var s=Object(L.a)(e.cities),l=s.filter((function(e){return JSON.stringify(e)!==JSON.stringify({})})).length;return s[l]=t.city,Y({},e,{cities:s});case"FETCH_GEOLOCATION_REQUEST":return Y({},e,{isGeoPosAvailable:t.isGeoPosAvailable,loading:!0});case"FETCH_GEOLOCATION_SUCCESS":case"FETCH_GEOLOCATION_FAILURE":return Y({},e,{isGeoPosAvailable:t.isGeoPosAvailable});case"FETCH_CITY_BY_COORDS_SUCCESS":return Y({},e,{cityByCoords:t.city});case"ADD_ERROR_MESSAGE":return Y({},e,{errorMessage:t.message});case"CLEAR_ERROR_MESSAGE":return Y({},e,{errorMessage:null});default:return e}},x=Object(P.b)(H);c.a.render(r.a.createElement(o.a,{store:x},r.a.createElement(N,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.2912e3eb.chunk.js.map