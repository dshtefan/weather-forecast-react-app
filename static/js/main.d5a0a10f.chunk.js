(this["webpackJsonpweather-search-2"]=this["webpackJsonpweather-search-2"]||[]).push([[0],{24:function(e,t,n){e.exports=n.p+"static/media/update.084487e1.svg"},25:function(e,t,n){e.exports=n.p+"static/media/delete.619e5992.svg"},26:function(e,t,n){e.exports=n(60)},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(5),c=n.n(r),o=n(2),l=n(7),s=(n(36),n(37),n(24)),u=n.n(s),d=(n(38),function(){return a.a.createElement("div",{className:"lds-css ng-scope"},a.a.createElement("div",{className:"lds-eclipse"},a.a.createElement("div",null)))}),m=function(){return{type:"FETCH_GEOLOCATION_REQUEST",isGeoPosAvailable:null}},f=Object(o.b)((function(e){var t=e.loading;return{city:e.cityByCoords,loading:t}}),{locRequested:m})((function(e){var t=e.city,n=e.loading,i=e.locRequested;return a.a.createElement("div",{id:"city-default"},n?a.a.createElement(d,null):a.a.createElement("div",null,a.a.createElement("div",{id:"icons-bar"},a.a.createElement("img",{id:"navIcon",src:u.a,alt:"",onClick:function(){return i()}})),a.a.createElement("div",{id:"city-info"},a.a.createElement("div",{id:"city-info-name"},t.city),a.a.createElement("div",{id:"city-info-weather"},t.main)),a.a.createElement("div",{id:"cd-weather-icon"},a.a.createElement("img",{src:"https://dshtefan.github.io/weather-search-2/icons/".concat(t.icon,".svg"),alt:""})),a.a.createElement("div",{id:"cd-temp"},"".concat(t.temp,"\xb0")),a.a.createElement("div",{id:"\u0441d-weather-values"},a.a.createElement("div",null,"Pressure: ",a.a.createElement("span",{id:"cd-pressure"},t.pressure," pHa")),a.a.createElement("div",null,"Wind: ",a.a.createElement("span",{id:"cd-wind"},t.wind," m/s")),a.a.createElement("div",null,"Humidity: ",a.a.createElement("span",{id:"cd-himidity"},t.humidity,"%")),a.a.createElement("div",null,"Coord: ",a.a.createElement("span",{id:"cd-coord"},"[".concat(t.lat,": ").concat(t.lon,"]"))))))})),E=(n(39),n(8)),p=(n(40),n(25)),v=n.n(p),y=Object(o.b)(null,{cityDelete:function(e){return{type:"DELETE_CITY",index:e}}})((function(e){var t=e.city,n=e.i,r=e.cityDelete,c=Object(i.useState)(!0),o=Object(E.a)(c,2),l=o[0],s=o[1];return Object(i.useEffect)((function(){t&&"{}"!==JSON.stringify(t)?s(!1):s(!0)}),[t]),a.a.createElement("div",{className:"city-list-item"},l?a.a.createElement(d,null):a.a.createElement("div",{className:"city-list-item"},a.a.createElement("div",{id:"tab-info"},a.a.createElement("div",{id:"tab-info-city"},a.a.createElement("div",{id:"tab-info-city-text"},t.error?"":"".concat(t.city," ").concat(t.temp,"\xb0"))),a.a.createElement("div",{id:"tab-info-icon"},a.a.createElement("div",{id:"tab-info-icon-svg"},t.error?"":a.a.createElement("img",{src:"https://dshtefan.github.io/weather-search-2/icons/".concat(t.icon,".svg"),alt:""}))),a.a.createElement("div",{id:"tab-info-delete"},a.a.createElement("div",{id:"tab-info-delete-svg"},a.a.createElement("img",{src:v.a,alt:"",onClick:function(){return r(n)}})))),t.error?a.a.createElement("div",{className:"error-message"},t.error):a.a.createElement("div",{id:"item-info"},a.a.createElement("div",{id:"item-info-left"},a.a.createElement("div",{className:"weather-info-line"},"Pressure:"),a.a.createElement("div",{className:"weather-info-line"},"Wind:"),a.a.createElement("div",{className:"weather-info-line"},"Humidity:"),a.a.createElement("div",{className:"weather-info-line"},"Coord.:")),a.a.createElement("div",{id:"item-info-right"},a.a.createElement("div",{className:"weather-info-line"},t.pressure," hPa"),a.a.createElement("div",{className:"weather-info-line"},t.wind," m/s"),a.a.createElement("div",{className:"weather-info-line"},t.humidity,"%"),a.a.createElement("div",{className:"weather-info-line"},"[",t.lat,", ",t.lon,"]")))))})),O=(n(41),{updateInputField:function(e){return{type:"UPDATE_INPUT_FIELD",text:e}}}),b=Object(o.b)(null,O)((function(e){var t=e.updateInputField,n=Object(i.useState)(""),r=Object(E.a)(n,2),c=r[0],o=r[1];return a.a.createElement("div",{id:"input-box-main"},a.a.createElement("div",{id:"input-box"},a.a.createElement("form",{id:"input-form"},a.a.createElement("input",{id:"input-field",onChange:function(e){return o(e.target.value)},value:c}),a.a.createElement("button",{id:"search-button",onClick:function(e){e.preventDefault(),o(""),t(c)}},"Search"))))})),g=Object(o.b)((function(e){var t=e.frontCity;return{cities:e.cities,frontCity:t}}))((function(e){var t=e.cities;return a.a.createElement("div",{id:"city-list"},a.a.createElement(b,null),a.a.createElement("div",{className:"city-list"},t.map((function(e,t){return a.a.createElement(y,{city:e,key:t,i:t})}))))})),h=(n(42),function(){return a.a.createElement("div",{id:"main-page"},a.a.createElement(f,null),a.a.createElement(g,null))}),C=n(13),S=n.n(C),T="https://api.openweathermap.org/data/2.5/weather?",w=function(e,t){return S.a.get(T,{params:{q:e,appid:t}})},j=function(e){var t=e.name,n=e.main,i=n.temp,a=n.humidity,r=n.pressure,c=e.weather[0],o=c.main,l=c.icon,s=e.wind.speed,u=e.coord;return{city:t,temp:i=(i-273.15).toFixed(0),icon:l=l.substr(0,2),main:o,pressure:r,humidity:a,wind:s,lon:u.lon,lat:u.lat}};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var P={cityLoaded:function(e){return{type:"FETCH_CITY_SUCCESS",city:e}},cityRequest:function(){return{type:"FETCH_CITY_REQUEST"}},locError:function(){return{type:"FETCH_GEOLOCATION_FAILURE",isGeoPosAvailable:!1}},locLoaded:function(){return{type:"FETCH_GEOLOCATION_SUCCESS",isGeoPosAvailable:!0}},locRequested:m,cityByCoordsLoaded:function(e){return{type:"FETCH_CITY_BY_COORDS_SUCCESS",city:e}},updateLoadingStatus:function(e){return{type:"UPDATE_LOADING_STATUS",loading:e}}},N=Object(o.b)((function(e){return{state:e}}),P)((function(e){var t=e.cityLoaded,n=e.cityRequest,r=e.locLoaded,c=e.locError,o=e.cityByCoordsLoaded,s=e.updateLoadingStatus,u=e.state,d=u.apiKey,m=u.cityDefault,f=u.isGeoPosAvailable,E=u.inputField,p=u.cityByCoords,v=function(e){var t=e.coords.latitude,n=e.coords.longitude;r(),function(e,t,n){return S.a.get(T,{params:{appid:n,lat:e,lon:t}})}(t,n,d).then((function(e){o(j(e.data))}))},y=function(){c(),w(m,d).then((function(e){o(j(e.data))}))};return Object(i.useEffect)((function(){E&&(n(),w(E,d).then((function(e){t(j(e.data))})).catch((function(e){t({error:e.message})})))}),[E,d,t,n]),Object(i.useEffect)((function(){var e,t;null===f&&(e=v,t=y,navigator.geolocation.getCurrentPosition(e,t))})),Object(i.useEffect)((function(){p&&"{}"!==JSON.stringify(p)&&s(!1)}),[p,s]),Object(i.useEffect)((function(){localStorage.setItem("state",JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,{inputField:null})))}),[u]),a.a.createElement("div",{id:"app"},a.a.createElement(h,null))})),I=n(6),A=n(9),D=function(){return JSON.parse(localStorage.getItem("state"))},F=D()?D():{apiKey:"3dd82107b17241c740a2a087d34da02d",inputField:null,cities:[],loading:!0,isGeoPosAvailable:null,cityDefault:"Moscow",cityByCoords:{}};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_INPUT_FIELD":return U({},e,{inputField:t.text});case"UPDATE_LOADING_STATUS":return U({},e,{loading:t.loading});case"DELETE_CITY":var n=Object(A.a)(e.cities);return n.splice(t.index,1),U({},e,{cities:n,inputField:null});case"FETCH_CITY_REQUEST":var i=Object(A.a)(e.cities);return i.push({}),U({},e,{cities:i});case"FETCH_CITY_SUCCESS":var a=Object(A.a)(e.cities),r=a.filter((function(e){return JSON.stringify(e)!==JSON.stringify({})})).length;return a[r]=t.city,U({},e,{cities:a});case"FETCH_GEOLOCATION_REQUEST":return U({},e,{isGeoPosAvailable:t.isGeoPosAvailable,loading:!0});case"FETCH_GEOLOCATION_SUCCESS":case"FETCH_GEOLOCATION_FAILURE":return U({},e,{isGeoPosAvailable:t.isGeoPosAvailable});case"FETCH_CITY_BY_COORDS_SUCCESS":return U({},e,{cityByCoords:t.city});default:return e}},H=Object(I.b)(G);c.a.render(a.a.createElement(o.a,{store:H},a.a.createElement(N,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.d5a0a10f.chunk.js.map