(this["webpackJsonpweather-search-2"]=this["webpackJsonpweather-search-2"]||[]).push([[0],{24:function(e,t,n){e.exports=n.p+"static/media/update.084487e1.svg"},25:function(e,t,n){e.exports=n.p+"static/media/delete.619e5992.svg"},26:function(e,t,n){e.exports=n(60)},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(6),c=n.n(r),o=n(2),l=(n(36),n(37),n(24)),u=n.n(l),s=(n(38),function(){return a.a.createElement("div",{className:"lds-css ng-scope"},a.a.createElement("div",{className:"lds-eclipse"},a.a.createElement("div",null)))}),d=function(){return{type:"FETCH_GEOLOCATION_REQUEST",isGeoPosAvailable:null}},f=Object(o.b)((function(e){var t=e.loading;return{city:e.cityByCoords,loading:t}}),{locRequested:d})((function(e){var t=e.city,n=e.loading,i=e.locRequested;return a.a.createElement("div",{id:"city-default"},n?a.a.createElement(s,null):a.a.createElement("div",null,a.a.createElement("div",{id:"icons-bar"},a.a.createElement("img",{id:"navIcon",src:u.a,alt:"",onClick:function(){return i()}})),t.error?a.a.createElement("div",null,t.error):a.a.createElement("div",null,a.a.createElement("div",{id:"city-info"},a.a.createElement("div",{id:"city-info-name"},t.city),a.a.createElement("div",{id:"city-info-weather"},t.main)),a.a.createElement("div",{id:"cd-weather-icon"},a.a.createElement("img",{src:"https://dshtefan.github.io/weather-search-2/icons/".concat(t.icon,".svg"),alt:""})),a.a.createElement("div",{id:"cd-temp"},"".concat(t.temp,"\xb0")),a.a.createElement("div",{id:"\u0441d-weather-values"},a.a.createElement("div",null,"Pressure: ",a.a.createElement("span",{id:"cd-pressure"},t.pressure," pHa")),a.a.createElement("div",null,"Wind: ",a.a.createElement("span",{id:"cd-wind"},t.wind," m/s")),a.a.createElement("div",null,"Humidity: ",a.a.createElement("span",{id:"cd-himidity"},t.humidity,"%")),a.a.createElement("div",null,"Coord: ",a.a.createElement("span",{id:"cd-coord"},"[".concat(t.lat,": ").concat(t.lon,"]")))))))})),E=(n(39),n(9)),m=(n(40),n(25)),y=n.n(m),p=Object(o.b)(null,{cityDelete:function(e){return{type:"DELETE_CITY",index:e}}})((function(e){var t=e.city,n=e.i,r=e.cityDelete,c=Object(i.useState)(!0),o=Object(E.a)(c,2),l=o[0],u=o[1];return Object(i.useEffect)((function(){t&&"{}"!==JSON.stringify(t)?u(!1):u(!0)}),[t]),a.a.createElement("div",{className:"city-list-item"},l?a.a.createElement(s,null):a.a.createElement("div",{className:"city-list-item"},a.a.createElement("div",{id:"tab-info"},a.a.createElement("div",{id:"tab-info-city"},a.a.createElement("div",{id:"tab-info-city-text"},t.error?"":"".concat(t.city," ").concat(t.temp,"\xb0"))),a.a.createElement("div",{id:"tab-info-icon"},a.a.createElement("div",{id:"tab-info-icon-svg"},t.error?"":a.a.createElement("img",{src:"https://dshtefan.github.io/weather-search-2/icons/".concat(t.icon,".svg"),alt:""}))),a.a.createElement("div",{id:"tab-info-delete"},a.a.createElement("div",{id:"tab-info-delete-svg"},a.a.createElement("img",{src:y.a,alt:"",onClick:function(){return r(n)}})))),t.error?a.a.createElement("div",{className:"error-message"},t.error):a.a.createElement("div",{id:"item-info"},a.a.createElement("div",{id:"item-info-left"},a.a.createElement("div",{className:"weather-info-line"},"Pressure:"),a.a.createElement("div",{className:"weather-info-line"},"Wind:"),a.a.createElement("div",{className:"weather-info-line"},"Humidity:"),a.a.createElement("div",{className:"weather-info-line"},"Coord.:")),a.a.createElement("div",{id:"item-info-right"},a.a.createElement("div",{className:"weather-info-line"},t.pressure," hPa"),a.a.createElement("div",{className:"weather-info-line"},t.wind," m/s"),a.a.createElement("div",{className:"weather-info-line"},t.humidity,"%"),a.a.createElement("div",{className:"weather-info-line"},"[",t.lat,", ",t.lon,"]")))))})),v=(n(41),Object(o.b)(null,{addCityToQueue:function(e){return{type:"ADD_CITY_TO_QUEUE",city:e}}})((function(e){var t=e.addCityToQueue,n=Object(i.useState)(""),r=Object(E.a)(n,2),c=r[0],o=r[1];return a.a.createElement("div",{id:"input-box-main"},a.a.createElement("div",{id:"input-box"},a.a.createElement("form",{id:"input-form"},a.a.createElement("input",{id:"input-field",onChange:function(e){return o(e.target.value)},value:c}),a.a.createElement("button",{id:"search-button",onClick:function(e){e.preventDefault(),o(""),t(c)}},"Search"))))}))),O=Object(o.b)((function(e){var t=e.frontCity;return{cities:e.cities,frontCity:t}}))((function(e){var t=e.cities;return a.a.createElement("div",{id:"city-list"},a.a.createElement(v,null),a.a.createElement("div",{className:"city-list"},t.map((function(e,t){return a.a.createElement(p,{city:e,key:t,i:t})}))))})),b=(n(42),function(){return a.a.createElement("div",{id:"main-page"},a.a.createElement(f,null),a.a.createElement(O,null))}),g=n(13),h=n.n(g),C="https://api.openweathermap.org/data/2.5/weather?",T=function(e,t){return h.a.get(C,{params:{q:e,appid:t}})},_=function(e){var t=e.name,n=e.main,i=n.temp,a=n.humidity,r=n.pressure,c=e.weather[0],o=c.main,l=c.icon,u=e.wind.speed,s=e.coord;return{city:t,temp:i=(i-273.15).toFixed(0),icon:l=l.substr(0,2),main:o,pressure:r,humidity:a,wind:u,lon:s.lon,lat:s.lat}},S=function(e,t){navigator.geolocation.getCurrentPosition(e,t)},j=function(e){var t=e.cities.map((function(e){return{city:e.city}}));localStorage.setItem("state",JSON.stringify({cities:t}))},w=function(e,t,n,i,a){a(),T(e,t).then((function(e){n(_(e.data))})).catch((function(){i()}))},P={cityLoaded:function(e){return{type:"FETCH_CITY_SUCCESS",city:e}},cityRequest:function(){return{type:"FETCH_CITY_REQUEST"}},locError:function(){return{type:"FETCH_GEOLOCATION_FAILURE",isGeoPosAvailable:!1}},locLoaded:function(){return{type:"FETCH_GEOLOCATION_SUCCESS",isGeoPosAvailable:!0}},locRequested:d,cityByCoordsLoaded:function(e){return{type:"FETCH_CITY_BY_COORDS_SUCCESS",city:e}},updateLoadingStatus:function(e){return{type:"UPDATE_LOADING_STATUS",loading:e}},cityError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"FETCH_CITY_ERROR",city:e}},deleteCityFromQueue:function(){return{type:"DELETE_CITY_FROM_QUEUE"}}},N=Object(o.b)((function(e){return{state:e}}),P)((function(e){var t=e.deleteCityFromQueue,n=e.cityError,r=e.cityLoaded,c=e.cityRequest,o=e.locLoaded,l=e.locError,u=e.cityByCoordsLoaded,s=e.updateLoadingStatus,d=e.state,f=d.apiKey,E=d.cityDefault,m=d.isGeoPosAvailable,y=d.cityByCoords,p=d.cities,v=d.citiesQueue,O=function(e){var t=e.coords.latitude,n=e.coords.longitude;o(),function(e,t,n){return h.a.get(C,{params:{appid:n,lat:e,lon:t}})}(t,n,f).then((function(e){u(_(e.data))})).catch((function(e){u({error:e.message})}))},g=function(){l(),T(E,f).then((function(e){u(_(e.data))})).catch((function(e){u({error:e.message})}))};return Object(i.useEffect)((function(){v.length>0&&(p.length<4?(w(v[0],f,r,n,c),t()):t())}),[v,p,t,f,r,c,n]),Object(i.useEffect)((function(){null===m&&S(O,g)})),Object(i.useEffect)((function(){y&&"{}"!==JSON.stringify(y)&&s(!1)}),[y,s]),Object(i.useEffect)((function(){j(d)}),[d]),a.a.createElement("div",{id:"app"},a.a.createElement(b,null))})),I=n(7),D=n(8),A=n(5),U={apiKey:"9c2f796d45e91e5c01a2ae26f1613625",citiesQueue:[],cities:[],loading:!0,isGeoPosAvailable:null,cityDefault:"Moscow",cityByCoords:{}};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var L=function(){var e=JSON.parse(localStorage.getItem("state"));return null===e?null:{citiesQueue:e.cities.map((function(e){return e.city}))}}(),R=L?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(D.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},U,{},L):U;function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(D.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY_TO_QUEUE":var n=Object(A.a)(e.citiesQueue);return n.push(t.city),G({},e,{citiesQueue:n});case"DELETE_CITY_FROM_QUEUE":var i=Object(A.a)(e.citiesQueue);return i.shift(),G({},e,{citiesQueue:i});case"UPDATE_LOADING_STATUS":return G({},e,{loading:t.loading});case"DELETE_CITY":var a=Object(A.a)(e.cities);return a.splice(t.index,1),G({},e,{cities:a,inputField:null});case"FETCH_CITY_REQUEST":var r=Object(A.a)(e.cities);return r.push({}),G({},e,{cities:r});case"FETCH_CITY_ERROR":var c=Object(A.a)(e.cities),o=c.filter((function(e){return JSON.stringify(e)!==JSON.stringify({})})).length;return c.splice(o,1),G({},e,{cities:c});case"FETCH_CITY_SUCCESS":var l=Object(A.a)(e.cities),u=l.filter((function(e){return JSON.stringify(e)!==JSON.stringify({})})).length;return l[u]=t.city,G({},e,{cities:l});case"FETCH_GEOLOCATION_REQUEST":return G({},e,{isGeoPosAvailable:t.isGeoPosAvailable,loading:!0});case"FETCH_GEOLOCATION_SUCCESS":case"FETCH_GEOLOCATION_FAILURE":return G({},e,{isGeoPosAvailable:t.isGeoPosAvailable});case"FETCH_CITY_BY_COORDS_SUCCESS":return G({},e,{cityByCoords:t.city});default:return e}},Y=Object(I.b)(H);c.a.render(a.a.createElement(o.a,{store:Y},a.a.createElement(N,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.671c822e.chunk.js.map