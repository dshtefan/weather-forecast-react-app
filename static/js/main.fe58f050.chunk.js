(this["webpackJsonpweather-search-2"]=this["webpackJsonpweather-search-2"]||[]).push([[0],{24:function(e,t,n){e.exports=n.p+"static/media/delete.f8c70af5.svg"},25:function(e,t,n){e.exports=n.p+"static/media/update.5befe2b8.svg"},26:function(e,t,n){e.exports=n.p+"static/media/err.7917b4f1.svg"},27:function(e,t,n){e.exports=n(63)},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"cityRequest",(function(){return _})),n.d(r,"cityLoaded",(function(){return C})),n.d(r,"locError",(function(){return j})),n.d(r,"locLoaded",(function(){return T})),n.d(r,"locRequested",(function(){return S})),n.d(r,"cityDelete",(function(){return g})),n.d(r,"updateLoadingStatus",(function(){return v})),n.d(r,"cityByCoordsLoaded",(function(){return N})),n.d(r,"cityError",(function(){return h})),n.d(r,"addCityToQueue",(function(){return P})),n.d(r,"deleteCityFromQueue",(function(){return D})),n.d(r,"addErrorMessage",(function(){return R})),n.d(r,"clearErrorMessage",(function(){return w}));var c=n(0),a=n.n(c),i=n(7),o=n.n(i),u=n(1),s=n(6),l=function(e,t){navigator.geolocation.getCurrentPosition(e,t)},f=function(){var e=JSON.parse(localStorage.getItem("state"));return null===e?null:{citiesQueue:e.cities.map((function(e){return e.city}))}},m=function(e){var t=e.cities.map((function(e){return{city:e.city}}));localStorage.setItem("state",JSON.stringify({cities:t}))},d=function(e){var t=e.name,n=e.main,r=n.temp,c=n.humidity,a=n.pressure,i=e.weather[0],o=i.main,u=i.icon,s=e.wind.speed,l=e.coord;return{city:t,temp:r=(r-273.15).toFixed(0),icon:u=u.substr(0,2),main:o,pressure:a,humidity:c,wind:s,lon:l.lon,lat:l.lat}},E=n(13),y=n.n(E),p="https://api.openweathermap.org/data/2.5/weather?",O=function(e,t,n){return y.a.get(p,{params:{appid:n,lat:e,lon:t}})},b=function(e,t){return y.a.get(p,{params:{q:e,appid:t}})},v=function(e){return{type:"UPDATE_LOADING_STATUS",loading:e}},g=function(e){return{type:"DELETE_CITY",index:e}},_=function(){return{type:"FETCH_CITY_REQUEST"}},C=function(e){return{type:"FETCH_CITY_SUCCESS",city:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"FETCH_CITY_ERROR",city:e}},S=function(){return{type:"FETCH_GEOLOCATION_REQUEST",isGeoPosAvailable:null}},T=function(){return{type:"FETCH_GEOLOCATION_SUCCESS",isGeoPosAvailable:!0}},j=function(){return{type:"FETCH_GEOLOCATION_FAILURE",isGeoPosAvailable:!1}},N=function(e){return{type:"FETCH_CITY_BY_COORDS_SUCCESS",city:e}},P=function(e){return{type:"ADD_CITY_TO_QUEUE",city:e}},D=function(){return{type:"DELETE_CITY_FROM_QUEUE"}},R=function(e){return{type:"ADD_ERROR_MESSAGE",message:e}},w=function(){return{type:"CLEAR_ERROR_MESSAGE"}},A=(n(54),n(55),function(e){var t=e.city;return e.loading?a.a.createElement(B,null):t.error?a.a.createElement("div",null,t.error):a.a.createElement("div",{className:"current-city"},a.a.createElement("div",{className:"current-city__name"},a.a.createElement("div",{className:"current-city__city-name"},t.city),a.a.createElement("div",{className:"current-city__weather"},t.main)),a.a.createElement("div",{className:"current-city__temp"},a.a.createElement("div",{className:"current-city__weather-icon"},a.a.createElement("img",{src:"https://dshtefan.github.io/weather-search-2/icons/".concat(t.icon,".svg"),alt:""})),a.a.createElement("div",{className:"current-city__temperature"},t.temp,"\xb0")),a.a.createElement("div",{className:"current-city__info"},a.a.createElement(J,t)))}),I=(n(56),function(e){var t=e.cities;return a.a.createElement("div",{className:"city-list"},t.map((function(e,t){return a.a.createElement(V,{city:e,key:t,i:t})})))}),L=(n(57),n(24)),U=n.n(L),F=function(e){var t=e.city,n=e.loading,r=e.deleteCity;return a.a.createElement("div",{className:"item"},n?a.a.createElement(B,null):a.a.createElement("div",{className:"item-content"},a.a.createElement("div",{className:"item-header"},a.a.createElement("div",{className:"item-header-city"},t.city),a.a.createElement("img",{className:"del-icon",src:U.a,alt:"",onClick:r})),a.a.createElement("div",{className:"item-body"},a.a.createElement("div",{className:"item-body-left"},a.a.createElement("div",{className:"item-temperature"},t.temp,"\xb0"),a.a.createElement("img",{src:"https://dshtefan.github.io/weather-search-2/icons/".concat(t.icon,".svg"),alt:""})),a.a.createElement(J,t))))},G=(n(58),n(25)),Q=n.n(G),M=n(26),Y=n.n(M),H=function(e){var t=e.locRequested,n=e.errorMessage;return a.a.createElement("div",{className:"icon-bar"},a.a.createElement("div",{className:"icons"},a.a.createElement("img",{className:"navIcon",src:Q.a,alt:"",onClick:function(){return t()}}),n?a.a.createElement("img",{className:"errIcon",src:Y.a,alt:""}):null,n?a.a.createElement("div",{className:"error-text"},n):null))},k=(n(59),function(e){var t=e.handleChange,n=e.inputValue,r=e.clickButton;return a.a.createElement("div",{className:"search"},a.a.createElement("form",{className:"input-form"},a.a.createElement("input",{className:"input-field",onChange:t,value:n}),a.a.createElement("button",{className:"search-button",onClick:r},"Search")))}),B=(n(60),function(){return a.a.createElement("div",{className:"lds-css ng-scope"},a.a.createElement("div",{className:"lds-eclipse"},a.a.createElement("div",null)))}),J=(n(61),function(e){var t=e.pressure,n=e.wind,r=e.humidity,c=e.lat,i=e.lon;return a.a.createElement("div",{className:"info-block"},a.a.createElement("div",{className:"item-info"},"Pressure: ",t," hPA"),a.a.createElement("div",{className:"item-info"},"Wind: ",n," m/s"),a.a.createElement("div",{className:"item-info"},"Humidity: ",r,"%"),a.a.createElement("div",{className:"item-info"},"Coord: [",c,", ",i,"]"))}),x=Object(u.b)((function(e){var t=e.loading;return{city:e.cityByCoords,loading:t}}))(A),q=Object(u.b)((function(e){return{cities:e.cities}}))(I),K=n(9),V=Object(u.b)(null,{cityDelete:g})((function(e){var t=e.city,n=e.i,r=e.cityDelete,i=Object(c.useState)(!0),o=Object(K.a)(i,2),u=o[0],s=o[1];return Object(c.useEffect)((function(){t&&"{}"!==JSON.stringify(t)?s(!1):s(!0)}),[t]),a.a.createElement(F,{city:t,loading:u,deleteCity:function(){return r(n)}})})),W=Object(u.b)((function(e){return{errorMessage:e.errorMessage}}),{locRequested:S})(H),z=Object(u.b)(null,{addCityToQueue:P})((function(e){var t=e.addCityToQueue,n=Object(c.useState)(""),r=Object(K.a)(n,2),i=r[0],o=r[1];return a.a.createElement(k,{inputValue:i,handleChange:function(e){return o(e.target.value)},clickButton:function(e){e.preventDefault(),o(""),""!==i&&t(i)}})})),X=function(){return a.a.createElement("div",{className:"page"},a.a.createElement(z,null),a.a.createElement(W,null),a.a.createElement(q,null),a.a.createElement(x,null))};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),ee=Object(u.b)((function(e){return{state:e}}),$)((function(e){var t=e.deleteCityFromQueue,n=e.addErrorMessage,r=e.clearErrorMessage,i=e.cityError,o=e.cityLoaded,u=e.cityRequest,s=e.locLoaded,f=e.locError,E=e.cityByCoordsLoaded,y=e.updateLoadingStatus,p=e.state,v=p.apiKey,g=p.cityDefault,_=p.isGeoPosAvailable,C=p.cityByCoords,h=p.citiesQueue,S=b,T=O,j=d,N=l,P=m,D=function(e){var t=e.coords.latitude,n=e.coords.longitude;s(),T(t,n,v).then((function(e){E(j(e.data))})).catch((function(e){E({error:e.message})}))},R=function(){f(),S(g,v).then((function(e){E(j(e.data))})).catch((function(e){E({error:e.message})}))};return Object(c.useEffect)((function(){h.length>0&&(u(),S(h[0],v).then((function(e){o(j(e.data)),r()})).catch((function(e){i(),n(e.message)})),t())})),Object(c.useEffect)((function(){null===_&&N(D,R)})),Object(c.useEffect)((function(){C&&"{}"!==JSON.stringify(C)&&y(!1)}),[C,y]),Object(c.useEffect)((function(){P(p)})),a.a.createElement(X,null)})),te=n(8),ne=n(5),re={apiKey:"9c2f796d45e91e5c01a2ae26f1613625",citiesQueue:[],cities:[],loading:!0,isGeoPosAvailable:null,cityDefault:"Moscow",cityByCoords:{},errorMessage:null};function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ae=f(),ie=ae?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},re,{},ae):re;function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY_TO_QUEUE":var n=Object(ne.a)(e.citiesQueue);return n.push(t.city),ue({},e,{citiesQueue:n});case"DELETE_CITY_FROM_QUEUE":var r=Object(ne.a)(e.citiesQueue);return r.shift(),ue({},e,{citiesQueue:r});case"UPDATE_LOADING_STATUS":return ue({},e,{loading:t.loading});case"DELETE_CITY":var c=Object(ne.a)(e.cities);return c.splice(t.index,1),ue({},e,{cities:c,inputField:null});case"FETCH_CITY_REQUEST":var a=Object(ne.a)(e.cities);return a.push({}),ue({},e,{cities:a});case"FETCH_CITY_ERROR":var i=Object(ne.a)(e.cities),o=i.filter((function(e){return JSON.stringify(e)!==JSON.stringify({})})).length;return i.splice(o,1),ue({},e,{cities:i});case"FETCH_CITY_SUCCESS":var u=Object(ne.a)(e.cities),s=u.filter((function(e){return JSON.stringify(e)!==JSON.stringify({})})).length;return u[s]=t.city,ue({},e,{cities:u});case"FETCH_GEOLOCATION_REQUEST":return ue({},e,{isGeoPosAvailable:t.isGeoPosAvailable,loading:!0});case"FETCH_GEOLOCATION_SUCCESS":case"FETCH_GEOLOCATION_FAILURE":return ue({},e,{isGeoPosAvailable:t.isGeoPosAvailable});case"FETCH_CITY_BY_COORDS_SUCCESS":return ue({},e,{cityByCoords:t.city});case"ADD_ERROR_MESSAGE":return ue({},e,{errorMessage:t.message});case"CLEAR_ERROR_MESSAGE":return ue({},e,{errorMessage:null});default:return e}},le=Object(te.b)(se);n(62);o.a.render(a.a.createElement(u.a,{store:le},a.a.createElement(ee,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.fe58f050.chunk.js.map